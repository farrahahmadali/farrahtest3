{
  "hash": "9490f91778dad8885d86d927a4d2db02",
  "result": {
    "markdown": "---\ntitle: \"Assignment 8\"\nauthor: \"Farrah Ali\"\ndate: \"2023-12-07\"\ncategories: [Assignment]\nimage: finalprojectpic.png\noutput: \n  flexdashboard::flex_dashboard:\n    storyboard: true\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlacrime <- read.csv('finallacrime.csv')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install and load required packages\n#install.packages(\"ggplot2\")\nlibrary(ggplot2)\n\n# Assuming your data frame is named 'lacrime'\n# Convert Vict.Descent to a new column 'EthnicityGroup' based on the specified criteria\nlacrime$EthnicityGroup <- ifelse(lacrime$Vict.Descent %in% c(\"A\", \"C\", \"F\", \"J\", \"K\", \"V\"), \"Asian\",\n                                  ifelse(lacrime$Vict.Descent == \"B\", \"Black\",\n                                         ifelse(lacrime$Vict.Descent == \"H\", \"Hispanic\",\n                                                ifelse(lacrime$Vict.Descent == \"I\", \"American Indian\",\n                                                       ifelse(lacrime$Vict.Descent == \"O\", \"Others\",\n                                                              ifelse(lacrime$Vict.Descent == \"W\", \"White\", lacrime$Vict.Descent)\n                                                       )\n                                                )\n                                         )\n                                  )\n)\n\n# Filter data for Asian ethnicity and exclude the year 2022\nasian_data <- lacrime[lacrime$Ethnicity == \"Asian\" & lacrime$Year %in% c(2020, 2021), ]\n\n# Create a bar chart with modified x-axis and light pink color\ngg <- ggplot(asian_data, aes(x = as.factor(Year), fill = factor(Year))) +\n  geom_bar(color = \"black\", fill = \"lightblue\") +\n  scale_x_discrete(breaks = c(\"2020\", \"2021\")) +\n  labs(title = \"Total Number of Asian Victims by Year\",\n       x = \"Year\",\n       y = \"Total Number of Victims\") +\n  theme_minimal()\n\n# Create a bar chart with modified data labels (with commas and decimal places)\ngg + geom_text(\n  aes(label = sprintf(\"%s (%.1f%%)\", format(..count.., big.mark = \",\"), ..count.. / sum(..count..) * 100)),\n  position = position_stack(vjust = 0.5),\n  stat = \"count\",\n  color = \"black\"\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: The dot-dot notation (`..count..`) was deprecated in ggplot2 3.4.0.\nâ„¹ Please use `after_stat(count)` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](finalprojectvisuals_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install and load required packages\n#install.packages(\"ggplot2\")\nlibrary(ggplot2)\n\n# Assuming your data frame is named 'lacrime'\n# Convert Vict.Descent to a new column 'EthnicityGroup' based on the specified criteria\nlacrime$EthnicityGroup <- ifelse(lacrime$Vict.Descent %in% c(\"A\", \"C\", \"F\", \"J\", \"K\", \"V\"), \"Asian\",\n                                  ifelse(lacrime$Vict.Descent == \"B\", \"Black\",\n                                         ifelse(lacrime$Vict.Descent == \"H\", \"Hispanic\",\n                                                ifelse(lacrime$Vict.Descent == \"I\", \"American Indian\",\n                                                       ifelse(lacrime$Vict.Descent == \"O\", \"Others\",\n                                                              ifelse(lacrime$Vict.Descent == \"W\", \"White\", lacrime$Vict.Descent)\n                                                       )\n                                                )\n                                         )\n                                  )\n)\n\n# Filter data for Asian ethnicity and exclude the year 2022\nasian_data <- lacrime[lacrime$Ethnicity == \"Black\" & lacrime$Year %in% c(2020, 2021), ]\n\n# Create a bar chart with modified x-axis and light pink color\ngg <- ggplot(asian_data, aes(x = as.factor(Year), fill = factor(Year))) +\n  geom_bar(color = \"black\", fill = \"Gray\") +\n  scale_x_discrete(breaks = c(\"2020\", \"2021\")) +\n  labs(title = \"Total Number of Black Victims by Year\",\n       x = \"Year\",\n       y = \"Total Number of Victims\") +\n  theme_minimal()\n\n# Create a bar chart with modified data labels (with commas and decimal places)\ngg + geom_text(\n  aes(label = sprintf(\"%s (%.1f%%)\", format(..count.., big.mark = \",\"), ..count.. / sum(..count..) * 100)),\n  position = position_stack(vjust = 0.5),\n  stat = \"count\",\n  color = \"black\"\n)\n```\n\n::: {.cell-output-display}\n![](finalprojectvisuals_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install and load required packages\n#install.packages(\"ggplot2\")\nlibrary(ggplot2)\n\n# Assuming your data frame is named 'lacrime'\n# Convert Vict.Descent to a new column 'EthnicityGroup' based on the specified criteria\nlacrime$EthnicityGroup <- ifelse(lacrime$Vict.Descent %in% c(\"A\", \"C\", \"F\", \"J\", \"K\", \"V\"), \"Asian\",\n                                  ifelse(lacrime$Vict.Descent == \"B\", \"Black\",\n                                         ifelse(lacrime$Vict.Descent == \"H\", \"Hispanic\",\n                                                ifelse(lacrime$Vict.Descent == \"I\", \"American Indian\",\n                                                       ifelse(lacrime$Vict.Descent == \"O\", \"Others\",\n                                                              ifelse(lacrime$Vict.Descent == \"W\", \"White\", lacrime$Vict.Descent)\n                                                       )\n                                                )\n                                         )\n                                  )\n)\n\n# Filter data for Asian ethnicity and exclude the year 2022\nasian_data <- lacrime[lacrime$Ethnicity == \"White\" & lacrime$Year %in% c(2020, 2021), ]\n\n# Create a bar chart with modified x-axis and light pink color\ngg <- ggplot(asian_data, aes(x = as.factor(Year), fill = factor(Year))) +\n  geom_bar(color = \"black\", fill = \"White\") +\n  scale_x_discrete(breaks = c(\"2020\", \"2021\")) +\n  labs(title = \"Total Number of White Victims by Year\",\n       x = \"Year\",\n       y = \"Total Number of Victims\") +\n  theme_minimal()\n\n# Create a bar chart with modified data labels (with commas and decimal places)\ngg + geom_text(\n  aes(label = sprintf(\"%s (%.1f%%)\", format(..count.., big.mark = \",\"), ..count.. / sum(..count..) * 100)),\n  position = position_stack(vjust = 0.5),\n  stat = \"count\",\n  color = \"black\"\n)\n```\n\n::: {.cell-output-display}\n![](finalprojectvisuals_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install and load required packages\n#install.packages(c(\"ggplot2\", \"lubridate\", \"scales\"))\nlibrary(ggplot2)\nlibrary(lubridate)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'lubridate'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(scales)\n\n# Convert DATE.OCC to a Date object\nlacrime$DATE.OCC <- as.Date(lacrime$DATE.OCC, format = \"%m/%d/%Y\")\n\n# Filter the data on Asian ethnicity and exclude the year 2022\nasian_data <- lacrime[lacrime$Vict.Descent %in% c(\"A\", \"C\", \"F\", \"J\", \"K\", \"V\") & year(lacrime$DATE.OCC) != 2022, ]\n\n# Create a new column 'MonthYear' by combining Month and Year\nasian_data$MonthYear <- format(asian_data$DATE.OCC, \"%Y-%m\")\n\n# Create a bar chart with light blue color and labels with commas, remove the legend\nggplot(asian_data, aes(x = MonthYear, fill = \"lightblue\")) +\n  geom_bar() +\n  geom_text(stat = \"count\", aes(label = comma(after_stat(count))), vjust = -0.5) +\n  labs(title = \"Total Number of Asian Victims by Month and Year\",\n       x = \"Month-Year\",\n       y = \"Total Number of Victims\") +\n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  scale_fill_manual(values = \"lightblue\")\n```\n\n::: {.cell-output-display}\n![](finalprojectvisuals_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convert DATE.OCC to a Date object\nlacrime$DATE.OCC <- as.Date(lacrime$DATE.OCC, format = \"%m/%d/%Y\")\n\n# Filter the data on Black ethnicity and exclude the year 2022\nblack_data <- lacrime[lacrime$Vict.Descent %in% c(\"B\") & year(lacrime$DATE.OCC) != 2022, ]\n\n# Create a new column 'MonthYear' by combining Month and Year\nblack_data$MonthYear <- format(black_data$DATE.OCC, \"%Y-%m\")\n\n# Create a bar chart with gray fill color and labels with commas, remove the legend\nggplot(black_data, aes(x = MonthYear, fill = \"Gray\")) +\n  geom_bar() +\n  geom_text(stat = \"count\", aes(label = comma(after_stat(count))), vjust = -0.5) +\n  labs(title = \"Total Number of Black Victims by Month and Year\",\n       x = \"Month-Year\",\n       y = \"Total Number of Victims\") +\n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  scale_fill_manual(values = \"gray\")\n```\n\n::: {.cell-output-display}\n![](finalprojectvisuals_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Convert DATE.OCC to a Date object\nlacrime$DATE.OCC <- as.Date(lacrime$DATE.OCC, format = \"%m/%d/%Y\")\n\n# Filter the data on White ethnicity and exclude the year 2022\nwhite_data <- lacrime[lacrime$Vict.Descent %in% c(\"W\") & year(lacrime$DATE.OCC) != 2022, ]\n\n# Create a new column 'MonthYear' by combining Month and Year\nwhite_data$MonthYear <- format(white_data$DATE.OCC, \"%Y-%m\")\n\n# Create a bar chart with gray fill color and labels with commas, remove the legend\nggplot(white_data, aes(x = MonthYear, fill = \"lightpink\")) +\n  geom_bar() +\n  geom_text(stat = \"count\", aes(label = comma(after_stat(count))), vjust = -0.5) +\n  labs(title = \"Total Number of White Victims by Month and Year\",\n       x = \"Month-Year\",\n       y = \"Total Number of Victims\") +\n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  scale_fill_manual(values = \"lightpink\")\n```\n\n::: {.cell-output-display}\n![](finalprojectvisuals_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\n#lacrime <- lacrime[2:148206, ]\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"\"] <- \"X\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"C\"] <- \"A\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"F\"] <- \"A\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"J\"] <- \"A\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"K\"] <- \"A\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"V\"] <- \"A\"\n\nfiltered_data <- lacrime %>% filter(Vict.Descent == \"A\")\n\ndates_for_letter_A <- filtered_data$DATE.OCC\n\nfiltered_data$DATE.OCC <- as.Date(filtered_data$DATE.OCC)\n\nsummary_data <- filtered_data %>%\n  group_by(DATE.OCC) %>%\n  summarize(Count = n())\n\nplot(summary_data$DATE.OCC, summary_data$Count, type = \"p\", pch = 1, cex = 0.4,\n     col = \"blue\", xlab = \"Date Occurred\", ylab = \"Number of Victims\", \n     main = \"Number of Asian Victims Daily in Los Angeles 2020\", mgp = c(3, 1, 0),\n     xaxt = \"n\", yaxt = \"n\")\naxis(1, at = seq(min(summary_data$DATE.OCC), max(summary_data$DATE.OCC), by = \"month\"), \n     labels = format(seq(min(summary_data$DATE.OCC), max(summary_data$DATE.OCC), by = \"month\"), \"%b %Y\"), cex.axis = 0.4)\naxis(2, las = 0, cex.axis = 0.4)\n\nlockdown_date <- as.Date(\"2020-03-19\")\ntext(x = lockdown_date, y = max(summary_data$Count), labels = \"Lockdown 3/19\", pos = 1, offset = 1, cex = 0.4)\n\ntravel_ban <- as.Date(\"2020-01-31\")\ntext(x = travel_ban, y = 39, labels = \"Travel Ban 1/31\", pos = 1, offset = 1, cex = 0.4)\n\nmodel <- lm(summary_data$Count ~ as.numeric(summary_data$DATE.OCC))\nabline(model, col = \"red\")\n```\n\n::: {.cell-output-display}\n![](finalprojectvisuals_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#lacrime <- lacrime[2:148206, ]\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"\"] <- \"X\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"C\"] <- \"A\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"F\"] <- \"A\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"J\"] <- \"A\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"K\"] <- \"A\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"V\"] <- \"A\"\n\nfiltered_data <- lacrime %>% filter(Vict.Descent == \"W\")\n\ndates_for_letter_A <- filtered_data$DATE.OCC\n\nfiltered_data$DATE.OCC <- as.Date(filtered_data$DATE.OCC)\n\nsummary_data <- filtered_data %>%\n  group_by(DATE.OCC) %>%\n  summarize(Count = n())\n\nplot(summary_data$DATE.OCC, summary_data$Count, type = \"p\", pch = 1, cex = 0.4,\n     col = \"blue\", xlab = \"Date Occurred\", ylab = \"Number of Victims\", \n     main = \"Number of White Victims Daily in Los Angeles 2020\", mgp = c(3, 1, 0),\n     xaxt = \"n\", yaxt = \"n\")\naxis(1, at = seq(min(summary_data$DATE.OCC), max(summary_data$DATE.OCC), by = \"month\"), \n     labels = format(seq(min(summary_data$DATE.OCC), max(summary_data$DATE.OCC), by = \"month\"), \"%b %Y\"), cex.axis = 0.4)\naxis(2, las = 0, cex.axis = 0.4)\n\n#lockdown_date <- as.Date(\"2020-03-19\")\n#text(x = lockdown_date, y = max(summary_data$Count), labels = \"Lockdown 3/19\", pos = 1, offset = 1, cex = 0.4)\n\n#travel_ban <- as.Date(\"2020-01-31\")\n#text(x = travel_ban, y = 39, labels = \"Travel Ban 1/31\", pos = 1, offset = 1, cex = 0.4)\n\nmodel <- lm(summary_data$Count ~ as.numeric(summary_data$DATE.OCC))\nabline(model, col = \"red\")\n```\n\n::: {.cell-output-display}\n![](finalprojectvisuals_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(dplyr)\n\n#lacrime <- lacrime[2:148206, ]\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"\"] <- \"X\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"C\"] <- \"A\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"F\"] <- \"A\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"J\"] <- \"A\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"K\"] <- \"A\"\nlacrime$Vict.Descent[lacrime$Vict.Descent == \"V\"] <- \"A\"\n\nfiltered_data <- lacrime %>% filter(Vict.Descent == \"B\")\n\ndates_for_letter_A <- filtered_data$DATE.OCC\n\nfiltered_data$DATE.OCC <- as.Date(filtered_data$DATE.OCC)\n\nsummary_data <- filtered_data %>%\n  group_by(DATE.OCC) %>%\n  summarize(Count = n())\n\nplot(summary_data$DATE.OCC, summary_data$Count, type = \"p\", pch = 1, cex = 0.4,\n     col = \"blue\", xlab = \"Date Occurred\", ylab = \"Number of Victims\", \n     main = \"Number of Black Victims Daily in Los Angeles 2020\", mgp = c(3, 1, 0),\n     xaxt = \"n\", yaxt = \"n\")\naxis(1, at = seq(min(summary_data$DATE.OCC), max(summary_data$DATE.OCC), by = \"month\"), \n     labels = format(seq(min(summary_data$DATE.OCC), max(summary_data$DATE.OCC), by = \"month\"), \"%b %Y\"), cex.axis = 0.4)\naxis(2, las = 0, cex.axis = 0.4)\n\n#lockdown_date <- as.Date(\"2020-03-19\")\n#text(x = lockdown_date, y = max(summary_data$Count), labels = \"Lockdown 3/19\", pos = 1, offset = 1, cex = 0.4)\n\n#travel_ban <- as.Date(\"2020-01-31\")\n#text(x = travel_ban, y = 39, labels = \"Travel Ban 1/31\", pos = 1, offset = 1, cex = 0.4)\n\nmodel <- lm(summary_data$Count ~ as.numeric(summary_data$DATE.OCC))\nabline(model, col = \"red\")\n```\n\n::: {.cell-output-display}\n![](finalprojectvisuals_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "finalprojectvisuals_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}